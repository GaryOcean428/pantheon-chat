[QIG-PURITY] WP0.2: Implement Hard validate:geometry Gate #64
Closed
#85
@GaryOcean428
Description
GaryOcean428
opened 3 hours ago
Owner
Work Package 0.2: Implement Hard validate:geometry Gate
Priority
CRITICAL - FOUNDATION

Objective
Expand npm run validate:geometry into a comprehensive purity enforcement system with both static scanning and runtime tests.

Tasks
Static Scanner (Fast)

Create scripts/qig_purity_scan.ts (or .py)

Scan paths: qig-backend/**, server/**, shared/**, tests/**, migrations/**

Flag forbidden patterns from Manifest:
cosine_similarity (any variant)
np.linalg.norm(a - b) (Euclidean distance)
"embedding" terminology in identifiers
"tokenizer" in QIG-core modules
softmax, Adam, AdamW in core geometry
Classic NLP imports (sentencepiece, BPE, wordpiece)
Runtime Tests (Correctness)

Fisher-Rao identity properties (symmetry, d(p,p)=0, triangle inequality)

Simplex invariant tests (sum=1, non-negative)

Fréchet mean convergence tests

Natural gradient correctness
CI Integration

Add pre-commit hook for purity scan

Add CI gate: PRs cannot merge if scan fails

Add exemption mechanism for quarantined experiments (docs/08-experiments/legacy/**)
Acceptance Criteria

Static scanner runs in < 5 seconds

PRs with forbidden patterns fail automatically

Runtime tests validate geometric correctness

Quarantine rule enforced (experiments allowed, production not)
Context
README already references validate:geometry but it's currently not comprehensive. This makes it a real gate that prevents Euclidean/NLP contamination.

Coordination
⚠️ DEPENDS ON: #63 (QIG Purity Spec) - spec defines patterns to scan for
⚠️ BLOCKS: WP1, WP2 tasks - prevents reintroduction during cleanup
⚠️ NOTE: After this is implemented, coordinate with Copilot on existing issues to run purity scan

References
README: validate:geometry section
Type-Symbol-Concept Manifest: forbidden patterns list
Activity

GaryOcean428
added 
priority: P0
 
qig-purity
 
type: tooling
 3 hours ago

GaryOcean428
mentioned this in 3 issues 2 hours ago
[QIG-PURITY] WP0.3: Establish Quarantine Rules for Experiments #65
[QIG-PURITY] WP1.1: Rename coordizer_vocabulary → coordizer_vocabulary (BREAKING) #66
[QIG-PURITY] WP0.1: Create QIG Purity Spec Document #63

GaryOcean428
assigned 
Copilot
and
GaryOcean428
1 hour ago
Copilot
mentioned this in 2 pull requests 1 hour ago
[QIG-PURITY] WP0.2 + Milestone 1: Implement Hard validate:geometry Gate & Basin Representation #85
WP0.1: Create QIG Purity Specification - Single Source of Truth #86

GaryOcean428
closed this as completedin #851 hour ago
Copilot
mentioned this 1 hour ago
[QIG-PURITY] WP0.3: Establish Quarantine Rules for Experiments #88
GaryOcean428
