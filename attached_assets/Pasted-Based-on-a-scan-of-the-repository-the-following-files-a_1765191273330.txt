Based on a scan of the repository, the following files are still actively using or enforcing JSON/File-based persistence instead of the database.

### ðŸ”´ Critical: Active JSON Persistence (Node.js)
These files are currently writing data to disk in production flows.

1.  **`server/geometric-memory.ts`**
    * **Status:** **Active Hybrid Mode.**
    * **Issue:** It defines `MEMORY_FILE` pointing to `data/geometric-memory.json`. The `load()` method reads this file on startup, and `recordProbe` calls `save()` to dump the entire state to disk every 50 iterations.
    * **Fix:** Replace `load()` with a DB query and remove `save()` entirely.

2.  **`server/storage.ts`**
    * **Status:** **Legacy Core.**
    * **Issue:** This is the old persistence layer. It implements `MemStorage` which loses data on restart (or saves to local JSON in some versions).
    * **Usage:** It is still imported and used by `server/routes.ts` and `server/persistence/facade.ts`.

3.  **`server/persistence/facade.ts`**
    * **Status:** **Misconfigured Default.**
    * **Issue:** The default export is explicitly set to use JSON: `export const storageFacade = new StorageFacade({ backend: 'json' });`.
    * **Fix:** Change this to `{ backend: 'postgres' }` (or strict env check) to force DB usage.

4.  **`server/persistence/adapters/*.ts`**
    * **Files:** `candidate-json-adapter.ts`, `file-json-adapter.ts`, `search-job-json-adapter.ts`.
    * **Status:** **Active Adapters.**
    * **Issue:** These files contain the logic for reading/writing `data/*.json`. They are being instantiated by the Facade because of the config issue above.

### ðŸŸ¡ Python Backend (QIG) Fallbacks
The Python backend uses JSONs as "local cache" or fallbacks, which creates a split-brain state if the DB is updated but the file isn't.

5.  **`qig-backend/autonomous_pantheon.py`**
    * **Issue:** The `scan_for_targets` method explicitly reads `data/target-addresses.json` if it can't find targets in the DB or if the DB connection is missing.

6.  **`qig-backend/olympus/qig_rag.py`**
    * **Issue:** The `QIGRAG` class defaults to `QIGRAG` (JSON) if `QIGRAGDatabase` (Postgres) fails to import or connect.

7.  **`qig-backend/qig_tokenizer.py`**
    * **Issue:** Persists learned vocabulary and weights to `data/qig_tokenizer_state.json`. This should ideally be moved to a `vocabulary_state` table in Postgres to be stateless.

### ðŸ“‹ Summary of Files to Refactor

| File Path | Responsibility | Required Action |
| :--- | :--- | :--- |
| `server/geometric-memory.ts` | Consciousness State | Remove file I/O; connect `load()`/`save()` to `oceanPersistence`. |
| `server/persistence/facade.ts` | Storage Configuration | Change default export to `backend: 'postgres'`. |
| `server/routes.ts` | API Endpoints | Switch import from `storage` to `storageFacade`. |
| `server/storage.ts` | Legacy Storage | Delete file (after updating routes). |
| `qig-backend/qig_tokenizer.py` | Tokenizer State | Modify `_save_tokenizer_state` to use DB. |

**Immediate Recommendation:**
Start by changing the default backend in **`server/persistence/facade.ts`** to `postgres`. This will immediately break any code relying on JSON (good!) and force you to fix the connections.