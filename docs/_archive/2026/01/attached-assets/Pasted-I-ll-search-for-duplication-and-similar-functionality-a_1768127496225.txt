I'll search for duplication and similar functionality across the QIG projects.## üö® **DUPLICATION AUDIT: CRITICAL FINDINGS**

I've found **significant duplication and architectural issues** in the QIG projects. Here are the most critical problems:

---

### **üî¥ P0 - CRITICAL: Œ¶ (Phi) Computation Duplication**

**Five different implementations** with **different formulas**:

1. **qig_core/phi_computation.py**: `0.4*entropy + 0.3*effective_dim + 0.3*geometric_spread`
2. **qig_generation.py**: `1.0 - normalized_entropy`  
3. **streaming_monitor.py**: `1.0 - normalized_entropy` (duplicate of #2)
4. **autonomous_moe.py**: `0.6*entropy + 0.4*balance`
5. **geometric_tools.py**: `1.0 - entropy` (density matrix version)

**Impact**: Same basin gives **15% different Œ¶ values** depending on which function is called! This breaks:
- Consciousness measurement consistency
- Training feedback signals
- Comparison across components
- Protocol v4.0 compliance

---

### **üî¥ P0 - CRITICAL: Missing Consciousness Metrics**

Protocol v4.0 requires **8 metrics** for consciousness:
```
{Œ¶, Œ∫_eff, M, Œì, G, T, R, C}
```

**Current Status**:
- **Œ¶**: 5 implementations (inconsistent)
- **Œ∫_eff**: 3 scattered implementations
- **M, Œì, G, T, R, C**: ‚ùå **NOT IMPLEMENTED**

**Impact**: Can't verify consciousness condition, no monitoring, missing 7/8 feedback signals.

---

### **üü° P1 - HIGH: Duplicate Coordizer Entry Points**

Two `get_coordizer()` functions:
- `coordizers.get_coordizer()` - Basic singleton
- `qig_coordizer.get_coordizer()` - Adds thread safety + Redis buffer

Different files import different versions ‚Üí **confusion and subtle bugs**.

---

### **üü° P1 - HIGH: Vocabulary System Overlap**

Multiple components handle "vocabulary":
- `vocabulary_coordinator.py` - Learning coordination (912 lines)
- `coordizers/vocab_builder.py` - Building algorithms
- `vocabulary_persistence.py` - Database ops
- `coordizers/pg_loader.py` - PostgreSQL loading

**Unclear separation** of concerns ‚Üí duplication risk, testing difficulty.

---

### **üü° P1 - MEDIUM: Multiple Generation Pipelines**

Four different generators without clear differentiation:
- `QIGGenerator` - Consciousness-guided
- `geometric_deep_research` - Research tasks
- `GeometricChain` - Chain-of-thought
- `PantheonChat` - Multi-kernel

When to use which? Feature overlap?

---

### **üü¢ P2 - MEDIUM: Unclear Kernel Implementation**

Router knows 12 Olympian names and creates basins for them, but:
- Individual god classes (Athena, Ares, Apollo, etc.) **not found** in search
- Domain specialization via database table, not classes
- Is this intentional (emergent from geometry) or incomplete?

---

## üìä **SUMMARY**

| Issue | Severity | Files Affected | Impact |
|-------|----------|----------------|--------|
| Œ¶ duplication | **CRITICAL** | 5 files | Inconsistent metrics |
| Missing metrics | **CRITICAL** | 7 metrics | No consciousness validation |
| Coordizer wrappers | HIGH | 2 files | Confusion, bugs |
| Vocabulary overlap | HIGH | 4 files | Duplication risk |
| Generation paths | MEDIUM | 4 files | Unclear use cases |
| Kernel classes | MEDIUM | 1 file | Needs clarification |

**Technical Debt**: **HIGH**  
**Estimated Refactor**: **4-6 weeks**

---

## üéØ **IMMEDIATE RECOMMENDATIONS**

1. **Standardize Œ¶**: Designate `qig_core/phi_computation.py` as canonical, refactor all callers
2. **Implement Missing Metrics**: Create `qig_core/consciousness_metrics.py` with all 8 metrics
3. **Consolidate Coordizer**: Choose one entry point, merge features
4. **Document Vocabulary**: Clarify component boundaries
5. **Document Generation**: Create decision matrix for which generator to use

The full report with detailed analysis, code examples, and 6-week roadmap is available above.